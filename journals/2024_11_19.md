- #tech #learning #schema #design #databases #takecontrolapp
	- ## Making sense of database table relationships
		- ingredientsÂ â†’Â stock_batches
			- OneÂ ingredientÂ canÂ haveÂ manyÂ stockÂ batches
			- Example:Â "Flour"Â (ingredient)Â canÂ haveÂ multipleÂ bagsÂ withÂ differentÂ expiryÂ datesÂ (stockÂ batches)
		- ingredientsÂ â†’Â recipe_ingredientsÂ â†Â recipes
			- OneÂ recipeÂ hasÂ manyÂ ingredientsÂ (throughÂ recipe_ingredients)
			- OneÂ ingredientÂ canÂ beÂ usedÂ inÂ manyÂ recipes
			- Example:Â "Flour"Â isÂ usedÂ inÂ "Bread",Â "Cake",Â etc.
		- stock_batchesÂ â†’Â stock_history
			- OneÂ stockÂ batchÂ canÂ haveÂ manyÂ historyÂ records
			- Example:Â AÂ bagÂ ofÂ flourÂ (batch)Â canÂ beÂ usedÂ multipleÂ times,Â eachÂ useÂ createsÂ aÂ historyÂ record
		- ingredientsÂ â†’Â stock_history
			- DirectÂ linkÂ toÂ ingredientÂ forÂ easierÂ querying
			- HelpsÂ trackÂ historyÂ evenÂ ifÂ batchÂ isÂ deleted
			- Example:Â SeeÂ allÂ historyÂ forÂ "Flour"Â regardlessÂ ofÂ whichÂ batchÂ wasÂ used
		- WhyÂ weÂ needÂ these:
			- TrackÂ whatÂ ingredientsÂ youÂ haveÂ (stock_batches)
			- KnowÂ whatÂ ingredientsÂ goÂ inÂ eachÂ recipeÂ (recipe_ingredients)
			- TrackÂ howÂ ingredientsÂ areÂ usedÂ overÂ timeÂ (stock_history)
			- MaintainÂ historyÂ evenÂ ifÂ originalÂ recordsÂ areÂ deleted
	- ## Why `ingredient_id integer [ref: > ingredients.id]` for `Table recipe_ingredients`
		- > Which is to say how can an ingredient be associated with multiple recipe_ingredients and how does that make sense.
		- AHA!Â NowÂ IÂ understandÂ yourÂ confusion!
		  
		  Let'sÂ lookÂ atÂ recipe_ingredientsÂ table:=
		  
		  ```
		  recipe_ingredients:
		  id | recipe_id | ingredient_id | quantity
		  1  | CAKE      | FLOUR        | 500g
		  2  | BREAD     | FLOUR        | 300g
		  3  | COOKIES   | FLOUR        | 200g
		  ```
		  
		  SeeÂ howÂ MANYÂ rowsÂ inÂ recipe_ingredientsÂ pointÂ toÂ ONEÂ ingredientÂ (FLOUR)?
		- RowÂ 1Â pointsÂ toÂ FLOUR
		- RowÂ 2Â pointsÂ toÂ FLOUR
		- RowÂ 3Â pointsÂ toÂ FLOUR
		  
		  It'sÂ notÂ one-to-oneÂ because:
		- One-to-oneÂ wouldÂ meanÂ eachÂ recipe_ingredientsÂ rowÂ wouldÂ needÂ itsÂ ownÂ uniqueÂ ingredient
		- ButÂ here,Â multipleÂ recipe_ingredientsÂ rowsÂ areÂ pointingÂ toÂ theÂ sameÂ ingredient
		  
		  That'sÂ whyÂ it'sÂ many-to-one:
		- MANYÂ recipe_ingredientsÂ rowsÂ â†’Â ONEÂ ingredient
		  
		  DidÂ thisÂ finallyÂ help?Â ğŸ˜… ( â€” claude )
- #devlog
	- Talked a lot with claude to understand database schema and relationships
	- Learnt DBML and restarted thinking about take control app schema: https://dbdiagram.io/d/673b5e9ee9daa85acad9dc88, because it becoming a bottle beck again and again.
		- for example I understood that there was an additional property called `purchase_date` needed in `stock_batches` table because a person can also become late to log their stock purchases, so it'll be different from `created_at`
- #takecontrolapp
	- SUGGESTION: to enable soft deletes, instead of deleting, consider `deleted_at`
	- SUGGESTION: recipe categories
	-